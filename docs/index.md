

# 快速入门

## 案例

敏捷开关这款产品对于开发者、产品经理、产品运营、企业决策者都会有极大的帮助，尤其是对企业整体快速迭代与市场增长，起着至关重要的作用。也正是因为如此，在早期的推广中，对于最主要目标人群的定位变的不那么明确。

为了可以小步快跑，我们决定先找到最能理解产品价值的那一小小部分人。所以我们决定对不同的人群，发放不同话术版本官网。通过测量访问者点击“使用产品”按钮和“查看文档”按钮的转化率（我们称之为兴趣转化率），来快速的缩小早期主要推广的人群。

于是在一开始，我们准备了2个话术版本:

- A版 : 以产品经理、运营为导向的热迭代话术版本
- B版 : 以技术、运维为导向的热迭代话术版本

我们做了如下分流:

1. 自主通过官网地址访问网站的人，我们80%分流给A版，20%分流给B版。因为我们主动推给了很多部门负责人和c字头开始的企业高管和老板
2. 通过非技术博主文章访问的人，我们100%分流给A版
3. 通过csdn技术博主文章访问的人，我们100%分流给B版

分流后，我们使用敏捷开关中的“数据实验”功能，高频率的查看兴趣转化率。1天后，我们观察到A版的转化率更高。考虑到实验人群分布的问题，我们在第二天快速的调整了分流与分量（让更多的人去访问B版），以最快的速度验证是否与实验人群分布有关。

我们最后通过反复的迭代（分流分群、验证、调整、重新分流分群、再验证），做出了我们的初步决策和总结，将A3版(即A版的第3次话术迭代版)作为了下次更大范围推广的官网。

整个过程是很紧张的，一篇受众量有限的推文的时效性很短（往往就5天），我们必须在有限的时间内实现最高效的迭代才有可能取得成果。产品经理、运营需要在无技术人员参与的情况下，快速的调整市场测试策略。

## 案例实现
### 功能开关的创建与使用

如果还没有建立账户的读者，可以先[注册新用户](https://portal.feature-flags.co/login/register) 。对于用户注册、账户管理的具体细节，可参考教程[多租户与项目管理](https://docs.feature-flags.co/account-setting/)。

功能开关的创建、使用、用户分流:
![type:video](./videos/开关的建立与分流分组.mp4)


### 低代码包裹不同版本

创建好开关后，需要研发团队将这些开关植入到产品代码中。

=== "Javascript"
    [点击查看GitHub上的开源代码与示例](https://github.com/feature-flags-co/ffc-js-client-sdk)  ,  Github上的demo文件夹内有示例代码

    ```javascript
    // 初始化sdk，传入环境Secret Key和用户信息
    FFCJsClient.initialize(
      '{项目中对应的环境的secret key}', 
      {
        key: '{用户名唯一标识符, 如sessionId, cookieId等}',
        customizeProperties: [  // 可加入任何在后台分流分群时所需要的属性
            {
                name: '{自定义属性的名字}',
                value: '{自定义属性的值}'
            }
        ]
      }
    );


    // 使用variation函数调用开关服务，获取相应的返回值
    const result = FFCJsClient.variation('{feature-flag-key}', '{默认返回值}');
    // 根据返回值不同，显示不同的官网话术版本
    if (result === '{variation 1}') {
        document.getElementById('version-a').style.display = 'block';
    }
    else if (result === '{variation 2}') {
        document.getElementById('version-b').style.display = 'block';
    }


    // 使用trackCustomEvent函数，对需要做转化率分析的地方进行埋点事件捕捉
    FFCJsClient.trackCustomEvent({ eventName: '触发开始使用按钮' });
    ```
=== "Vue"
    [点击查看GitHub上的开源代码与示例](https://github.com/feature-flags-co/ffc-vue) 
    ```javascript
    
    ```
=== "React"
    ```javascript
    
    ```

=== "Angular"
    ```javascript
    
    ```

=== "微信小程序"
    ```javascript
    
    ```


<!-- 

## 高频/精细的发布功能, 安全/无忧的运营产品

让功能的发布/下线/回退 精细化到每个用户、每一个模块、每一分钟、每一种技术环境、每一个实用场景。

我们将以微信小程序为案例，描述敏捷开关是如何作用于功能模块，让发布功能做的更高频/惊喜，让运营变的更安全/无忧。

## 需求分析

小程序"demo"希望添加一个新的功能，团队希望新功能可以进行快速迭代、试错。希望实现:

- 功能产品可以尽快得到市场反馈，从而快速调整方向
- 尽量把产品新功能的BUG扼杀在摇篮中

## 在Portal中创建并初始化配置开关

- 为了尽快得到市场反馈，团队决定让市场专员使用mock数据的版本去市场展示获得反馈。
- 用灰度发布的模式，先发布1%给早期用户，如果有BUG，我们可以在用户数量上降低影响。

于是我们可以将开关定义如下三个状态:

- `true & real data`, 使用真实数据向匹配用户开放功能
- `true & demo data`, 使用mock数据向匹配用户开放功能
- `false`,  不展示功能

并在一开始将`RD`，`PM`组的用户返回`true & real data`，其他用户返回`false`。

![type:video](./videos/建立开关并初始化配置.mp4)


## 使用开关将我们的功能包裹

完整代码请查看 [gtihub敏捷开关微信小程序插件demo](https://github.com/feature-flags-co/ffc-sdk-wechat-miniprogram/tree/main/demo) 

### 引入"敏捷开关"微信小程序插件进入我们的demo项目

![type:video](./videos/引入微信小程序SDK.mp4)

### 注入敏捷开关代码，包裹功能

![type:video](./videos/使用开关将我们的功能包裹.mp4)

## 发布未完成的功能

为了最快的向市场求证新功能的定位是否准确，我们将使用模拟数据的版本暴露给市场专员，让他们可以拿着小程序去做市场反馈。

此时，我们将模拟数据功能暴露给`BD`组的用户

![type:video](./videos/发布未完成的功能.mp4)


## 发布完成的初版功能给1%的市场用户

我们根据市场专员的反馈进行了及时调整，并尽快出了第一个版本。为了避免新版本的BUG影响用户对品牌的信任，我们决定只将新功能发给1%的市场用户。

![type:video](./videos/发布完成的初版功能给1%的市场用户.mp4)


## 逐步发布功能给剩下的用户

![type:video](./videos/逐步发布功能给剩下的用户.mp4)








## 实现方法
 -->


### 使用开关对版本进行分流、分群，并验证数据